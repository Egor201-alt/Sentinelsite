@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');

/* --- Цветовая палитра и переменные --- */
:root {
    --bg-color: #121212;
    --surface-color: #1E1E1E;
    --primary-color: #FCA311;
    --primary-hover: #FFB74D;
    --text-color: #E0E0E0;
    --text-muted: #a0a0a0;
    --danger-color: #D32F2F;
    --danger-hover: #E57373;
    --success-color: #4CAF50;
    --success-hover: #66BB6A;
    --font-family: 'Montserrat', sans-serif;
    --border-radius: 12px;
}

/* --- Общие стили и структура --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background-color: var(--bg-color); color: var(--text-color); font-family: var(--font-family); min-height: 100vh; }
.page-wrapper { display: flex; flex-direction: column; height: 100vh; }
.dashboard-body { display: flex; flex-grow: 1; overflow: hidden; }

/* --- ШАПКА САЙТА --- */
.site-header {
    background-color: var(--surface-color);
    padding: 20px 40px;
    border-bottom: 1px solid #333;
    box-shadow:0 4px 20px -5px rgba(252,163,17,0.1);
    flex-shrink: 0;
    z-index: 10;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}

/* 
   УДАЛИТЬ СТАРЫЙ СТИЛЬ:
   .site-title { font-size: 1.5rem; text-shadow: 0 0 8px rgba(252,163,17,0.4); } 
*/

/* ДОБАВИТЬ НОВЫЕ СТИЛИ ВМЕСТО .site-title */
.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    color: var(--color-text, #f0f0f0); /* Используем переменную или запасной цвет */
    text-decoration: none;
    font-size: 1.5rem;
    font-weight: 700;
    font-family: 'Montserrat', sans-serif; /* Важно добавить шрифт для консистентности */
}

.logo img {
    height: 36px;
    border-radius: 8px;
}
/* --- КОНЕЦ БЛОКА ДЛЯ ЗАМЕНЫ --- */


.header-profile { display:flex; align-items:center; gap:10px; background-color:#2c2c2c; border:1px solid transparent; border-bottom:1px solid #333; border-radius:12px; padding:8px 10px 8px 12px; cursor:pointer; transition:background-color 0.2s ease }
.header-profile:hover { background-color:#383838 }
.header-profile img { width:34px; height:34px }
.profile-name { font-weight:600; font-size:1.1rem; color:var(--text-color) }
/* --- Стили для правых элементов шапки --- */

/* Новая обертка для кнопок справа */
.header-right-panel {
    display: flex;
    align-items: center;
    gap: 15px; /* Расстояние между кнопкой уведомлений и профилем */
}

/* Стили для иконки-кнопки (уведомления) */
.header-icon-btn {
    background-color: #2c2c2c;
    border: 1px solid transparent;
    color: var(--text-muted);
    width: 48px;  /* Делаем ее квадратной и по высоте как плитка профиля */
    height: 48px;
    border-radius: 10px;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.header-icon-btn:hover {
    background-color: #383838;
    color: var(--text-color);
    border-color: transparent;
}

/* Выпадающее меню профиля */
.profile-dropdown { position:absolute; top:calc(100% - 10px); right:40px; width:260px; background-color:#252525; border:1px solid transparent; border-radius:var(--border-radius); box-shadow:0 10px 30px rgba(0,0,0,0.3); padding:12px; z-index:100; opacity:1; transform:translateY(0); transition:opacity 0.2s ease,transform 0.2s ease; pointer-events:auto }
.profile-dropdown.hidden { opacity:0; transform:translateY(-10px); pointer-events:none }
.dropdown-user-info { display:flex; align-items:center; gap:15px; padding:8px }
.dropdown-user-info img { width:48px; height:48px }
.user-info-name { font-size:1.1rem; font-weight:600; color:var(--text-color) }
.dropdown-divider { border:none; border-top:1px solid #333; margin:10px 0 }
.dropdown-menu { display:flex; flex-direction:column; gap:5px }
.dropdown-item { display:flex; align-items:center; gap:15px; padding:12px; text-decoration:none; color:var(--text-muted); font-weight:500; border-radius:8px; transition:background-color 0.2s ease,color 0.2s ease }
.dropdown-item:hover { background-color:#2c2c2c; color:var(--text-color) }
.dropdown-item i { width:20px; font-size:1.1rem; text-align:center }
.dropdown-item.danger-link:hover { background-color:rgba(211,47,47,0.1); color:var(--danger-color) }

/* --- Сайдбар --- */
.sidebar { width: 250px; background-color: var(--surface-color); padding: 20px; flex-shrink: 0; border-right: 1px solid #333; overflow-y: auto; }
.sidebar-nav { list-style: none; }
.sidebar-nav a { display:flex; align-items:center; padding:12px 15px; margin-bottom:5px; color:var(--text-muted); text-decoration:none; border-radius:10px; transition:background-color 0.2s ease,color 0.2s ease,transform 0.2s ease,box-shadow 0.2s ease; font-weight:500; position:relative }
.sidebar-nav a:hover { color:#fff; background-color:#2c2c2c; transform:translateX(5px) }
.sidebar-nav a.active { font-weight:600; color:#fff; background:linear-gradient(90deg,rgba(252,163,17,0.1) 0,rgba(252,163,17,0) 100%); box-shadow:inset 3px 0 0 0 var(--primary-color) }
.sidebar-nav a i { width: 20px; margin-right: 15px; font-size: 1.1rem; text-align: center; }

/* --- Основной контент --- */
.main-content { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; }
.container { width: 100%; max-width: 1900px; margin: 0 auto; display: flex; flex-direction: column; flex-grow: 1; }
.content-panel { background-color:var(--surface-color); padding:0; border-radius:var(--border-radius); display:flex; flex-direction:column; flex-grow:1 }
.page-header { display: flex; align-items: center; margin-bottom: 30px; padding: 25px 25px 0 25px; }
.back-button { color: var(--text-muted); font-size: 24px; text-decoration: none; margin-right: 20px; transition: color 0.3s ease; }
.back-button:hover { color: var(--text-color); }
h1, h2 { font-weight: 600; }
h1 { font-size: 1.5rem; }
h2 { font-size: 1.2rem; margin-bottom: 20px; color: var(--text-color); }

/* --- Основная сетка --- */
.main-grid { display:grid; grid-template-columns:300px auto 300px; grid-template-rows:1fr; gap:30px; width:100%; flex-grow:1; padding:0 25px 25px 25px }

/* --- Левая панель: Карта --- */
.account-panel { display:flex; flex-direction:column; gap:30px }
.card-display-wrapper { perspective:1000px}
.card-display { width:100%; height:180px; background-image:linear-gradient(45deg,rgba(252,163,17,0.1),rgba(30,30,30,0.5)),url('img/maxresdefault1.jpg'); background-size:cover; background-position:center; border-radius:var(--border-radius); padding:0; display:flex; flex-direction:column; justify-content:flex-end; align-items:flex-end; position:relative; border:1px solid rgba(255,255,255,0.1); transition:transform 0.2s ease-out,filter 0.3s ease-out }
.card-display.card-active { filter:drop-shadow(0px 15px 25px rgba(0,0,0,0.4)) }
.card-info .card-name { font-weight:500; font-size:1rem; display:flex; align-items:center; gap:8px }
.card-info .card-name .fa-pencil-alt { font-size:0.8rem; color:var(--text-muted); cursor:pointer }
.card-info .card-number { font-size:0.9rem; color:var(--text-muted) }
.card-balance { font-size:2.5rem; font-weight:700; color:#fff; text-shadow:0 0 10px rgba(252,163,17,0.5); padding:20px }
.glass-container { position:absolute; top:5px; left:5px; display:inline-block; padding:12px 18px; background-color:rgba(0,0,0,0.3); backdrop-filter:blur(5px); border-radius:12px; border:1px transparent }
.glass-container .card-name { color:#fff; font-weight:600 }
.glass-container .card-number { color:rgba(255,255,255,0.8) }
.glass-container .card-name .fa-pencil-alt { color:rgba(255,255,255,0.7) }
.action-buttons { display: flex; flex-direction: column; gap: 10px; }
.action-btn { width: 100%; padding: 15px; background-color: #2c2c2c; color: var(--text-muted); border: 1px solid transparent; border-radius: 10px; font-family: var(--font-family); font-size: 1rem; font-weight: 500; text-align: left; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 15px; }
.action-btn i { width: 20px; text-align: center; }
.action-btn:hover { background-color: #383838; color: var(--text-color); }

/* --- Стили для кнопок управления на карте --- */
.card-name-wrapper { display:flex; justify-content:space-between; align-items:center; gap:15px }
.card-controls { display:flex; gap:5px }
.card-icon-btn { background:none; border:none; color:rgba(255,255,255,0.7); font-size:0.9rem; cursor:pointer; padding:5px; border-radius:50%; width:28px; height:28px; display:flex; align-items:center; justify-content:center; transition:all 0.2s ease }
.card-icon-btn:hover { color:#fff; background-color:rgba(255,255,255,0.1); transform:scale(1.1) }
.card-icon-btn.copied,.card-icon-btn.success { color:var(--success-color); transform:scale(1.2) }
.card-icon-btn.error { color:var(--danger-color); transform:scale(1.2)}
.share-btn { background:none; border:none; color:rgba(255,255,255,0.7); font-size:0.9rem; cursor:pointer; padding:5px; border-radius:50%; transition:all 0.2s ease }
.share-btn:hover { color:#fff; transform:scale(1.1)}
.share-btn.copied { color:var(--success-color); transform:scale(1.2) }
.beta-badge {
    background: linear-gradient(145deg, var(--primary-hover), var(--primary-color));
    color: #1E1E1E; 
    padding: 4px 10px;
    font-size: 0.8rem;
    font-weight: 700;
    border-radius: 8px;
    text-transform: uppercase;
    margin-left: 8px;
    vertical-align: middle;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    box-shadow: 0 0 8px rgba(252, 163, 17, 0.4);
    animation: pulse-glow 2.5s infinite ease-in-out;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

@keyframes pulse-glow {
    0% {
        box-shadow: 0 0 8px rgba(252, 163, 17, 0.4);
    }
    50% {
        box-shadow: 0 0 16px rgba(252, 163, 17, 0.7);
    }
    100% {
        box-shadow: 0 0 8px rgba(252, 163, 17, 0.4);
    }
}

/* --- Стили для модального окна редактирования названия --- */
.modal-content.styled-modal { border-top:3px solid var(--primary-color); border-radius:var(--border-radius); padding:25px; max-width:480px }
.styled-input { width:100%; padding:12px 15px; background-color:#2c2c2c; border:1px solid #383838; border-radius:8px; color:var(--text-color); font-family:var(--font-family); font-size:1rem; transition:all 0.2s ease }
.styled-input:focus { outline:none; border-color:var(--primary-color); box-shadow:0 0 10px rgba(252,163,17,0.3) }
.save-name-btn { width:100%; justify-content:center }
.save-name-btn i { font-size:0.9rem }
.form-label-wrapper { display:flex; justify-content:space-between; align-items:baseline; padding:0 }
.form-group { position:relative; display:flex; flex-direction:column; gap:8px; margin-bottom:25px }
.form-group label { font-weight:500; color:var(--text-muted); font-size:0.9rem }
[id$="-counter"] { position:absolute; right:15px; bottom:13px; font-size:0.8rem; color:var(--text-muted); font-weight:500; transition:color 0.2s ease; pointer-events:none }
[id$="-counter"].limit-reached { color:var(--danger-color); font-weight:600 }

/* --- Опасная зона --- */
.danger-zone { margin-top: auto; padding: 15px; background-color: rgba(211, 47, 47, 0.05); border: 1px solid rgba(211, 47, 47, 0.2); border-radius: var(--border-radius); }
.danger-zone-title { display: flex; align-items: center; text-align: center; color: var(--danger-color); font-weight: 600; margin-bottom: 15px; font-size: 0.9rem; letter-spacing: 1px; }
.danger-zone-title::before, .danger-zone-title::after { content: ''; flex-grow: 1; border-bottom: 1px solid rgba(211, 47, 47, 0.3); }
.danger-zone-title::before { margin-right: 0.5em; }
.danger-zone-title::after { margin-left: 0.5em; }
.danger-buttons { display: flex; flex-direction: column; gap: 10px; }
.danger-zone .action-btn.danger { background-color: transparent; border-color: var(--danger-color); color: var(--danger-color); }
.danger-zone .action-btn.danger:hover { background-color: var(--danger-color); color: #fff; }

/* --- Панель транзакций --- */
.transactions-panel { background-color:transparent; display:flex; flex-direction:column; border-left:1px solid #333; padding-left:30px }
.transaction-list { list-style: none; flex-grow: 1; }
.transaction-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #333; }
.transaction-item:last-child { border-bottom: none; }
.transaction-title { display: block; font-weight: 500; }
.transaction-date { font-size: 0.8rem; color: var(--text-muted); }
.transaction-amount { font-weight: 600; font-size: 1.1rem; display: flex; align-items: center; gap: 6px; }
.transaction-amount.positive { color: var(--success-color); }
.transaction-amount.negative { color: var(--danger-color); }

/* --- Панель рекламы --- */
/* Рекламная панель */
.advertisement-panel {
    display: flex;
    border-left: 1px solid #333;
    padding-left: 30px;
}
.ad-content {
    width: 100%;
    border: 2px dashed #333;
    border-radius: var(--border-radius);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 15px;
    color: var(--text-muted);
    text-align: center;
}
.ad-content i {
    font-size: 2.5rem;
}
.ad-content span {
    font-weight: 500;
}


/* --- Пагинация --- */
.pagination { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 20px; color: var(--text-muted); }
.page-btn { background: none; border: none; color: var(--text-muted); font-size: 1rem; cursor: pointer; padding: 5px 10px; transition: color 0.3s ease; }
.page-btn:hover:not(:disabled) { color: var(--text-color); }
.page-btn:disabled { color: #444; cursor: not-allowed; }

/* --- Адаптивность --- */
@media (max-width: 1200px) {
    .main-grid { grid-template-columns: 300px 1fr; }
    .fines-panel { grid-column: 1 / -1; margin-top: 30px; }
}
@media (max-width: 992px) {
    .page-wrapper { height: auto; }
    .dashboard-body { flex-direction: column; }
    .sidebar { width: 100%; height: auto; border-right: none; border-bottom: 1px solid #333; }
    .main-content { height: auto; padding: 20px; }
    .main-grid { grid-template-columns: 1fr; grid-template-rows: auto; padding: 0; }
    .account-panel, .transactions-panel { margin-bottom: 30px; }
    .transactions-panel, .fines-panel { border-left: none; padding-left: 0; }
    .content-panel, .page-header { padding: 25px; }
}

/* --- Стили для новых элементов --- */
.primary-action { background-color:var(--primary-color); color:var(--bg-color); font-weight:600; text-align:center; justify-content:center }
.primary-action:hover { background-color:var(--primary-hover); color:var(--bg-color); transform:translateY(-2px); box-shadow:0 5px 15px rgba(252,163,17,0.2) }
.panel-header { display:flex; align-items:center; gap:15px; margin-bottom:20px }
.panel-header h2 { margin-right:auto; margin-bottom:0 }

/* --- Стили для анимированного фильтра --- */
.transaction-filters { position:relative; display:flex; flex-shrink:0; gap:5px; background-color:#2c2c2c; padding:5px; border-radius:10px; border:1px solid #333 }
.active-indicator { position:absolute; top:5px; left:0; height:calc(100% - 10px); background-color:var(--primary-color); border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.3); transition:transform 0.4s cubic-bezier(0.65,0,0.35,1),width 0.4s cubic-bezier(0.65,0,0.35,1); z-index:0 }
.filter-btn { position:relative; z-index:1; background-color:transparent; border:none; color:var(--text-muted); font-family:var(--font-family); padding:6px 14px; border-radius:8px; cursor:pointer; font-weight:500; transition:color 0.3s ease }
.filter-btn:hover:not(.active) { color:var(--text-color) }
.filter-btn.active { color:var(--bg-color); font-weight:600 }

/* --- Стили для кнопки аналитики --- */
.icon-btn { background-color:#2c2c2c; border:1px solid #333; color:var(--text-muted); width:36px; height:36px; border-radius:8px; cursor:pointer; transition:all 0.2s ease; font-size:1rem; flex-shrink:0 }
.icon-btn:hover { background-color:#2c2c2c; border-color:#444; color:var(--text-color) }
.analytics-modal { position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:1000; opacity:0; pointer-events:none; transition:opacity 0.3s ease }
.analytics-modal.modal-visible { opacity:1; pointer-events:auto }
.analytics-content { background-color:var(--surface-color); padding:25px; border-radius:var(--border-radius); width:100%; max-width:600px; border:1px solid #333; transform:scale(0.95); transition:transform 0.3s ease; box-shadow:0 0 40px -10px rgba(var(--primary-color-rgb),0.3) }
.analytics-modal.modal-visible .analytics-content {transform:scale(1)}
.analytics-header { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #333; padding-bottom:15px; margin-bottom:20px }
.close-modal-btn { background:none; border:none; color:var(--text-muted); font-size:1.2rem; cursor:pointer; transition:color 0.2s ease }
.close-modal-btn:hover { color:var(--text-color) }
.analytics-body { display:flex; align-items:center; gap:30px }
.chart-container { flex-shrink:0 }
.analytics-chart { width:200px; height:200px; border-radius:50%; background-image:conic-gradient(#4A90E2 0 45%,#50E3C2 45% 77%,#E96565 77% 92%,#F5A623 92% 100% ); opacity:0; transform:scale(0) rotate(-180deg); transition:transform 0.3s ease-out,filter 0.3s ease-out }
.analytics-modal.modal-visible .analytics-chart { animation:chart-intro-animation 1s 0.3s cubic-bezier(0.19,1,0.22,1) forwards }
@keyframes chart-intro-animation {to {opacity:1; transform:scale(1) rotate(0deg)}}
.analytics-chart.highlight-transfers { transform:scale(1.05); filter:drop-shadow(0 0 12px #4A90E2) }
.analytics-chart.highlight-purchases {transform:scale(1.05); filter:drop-shadow(0 0 12px #50E3C2) }
.analytics-chart.highlight-fines { transform:scale(1.05); filter:drop-shadow(0 0 12px #E96565) }
.analytics-chart.highlight-taxes { transform:scale(1.05); filter:drop-shadow(0 0 12px #F5A623) }
.analytics-legend { list-style:none; width:100%; display:flex; flex-direction:column; gap:5px }
.legend-item { display:flex; align-items:center; font-size:0.9rem; padding:8px; border-radius:6px; transition:background-color 0.2s ease; cursor:pointer }
.legend-item:hover { background-color:rgba(255,255,255,0.05) }
.legend-color { width:12px; height:12px; border-radius:3px; margin-right:10px }
.legend-label { color:var(--text-color) }
.legend-amount { margin-left:auto; font-weight:600; color:var(--text-muted) }
.color-transfers { background-color:#4A90E2 }
.color-purchases { background-color:#50E3C2 }
.color-fines { background-color:#E96565 }
.color-taxes { background-color:#F5A623 }
.transaction-main-info { display:flex; align-items:center; gap:15px }
.transaction-icon-wrapper {width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; flex-shrink:0; font-size:1rem } 
.transaction-icon-wrapper.icon-positive { background-color:rgba(76,175,80,0.1); color:var(--success-color) }
.transaction-icon-wrapper.icon-negative { background-color:rgba(211,47,47,0.1); color:var(--danger-color) }
.transaction-icon-wrapper.icon-transfer { background-color:#2c2c2c; color:var(--text-muted)}
.transaction-icon-wrapper.icon-neutral { background-color:rgba(252,163,17,0.1); color:var(--primary-color) }
.transaction-details { line-height:1.4 }

/* --- Стили для раскрывающихся транзакций и статусов --- */
.transaction-item {flex-direction:column; align-items:stretch; padding:0; gap:0; cursor:pointer}
.transaction-summary {display:flex; justify-content:space-between; align-items:center; padding:15px 0; transition:background-color 0.2s ease}
.transaction-item.expanded .transaction-summary {background-color:rgba(255,255,255,0.03)}
.transaction-expanded-details {max-height:0; overflow:hidden; transition:max-height 0.4s ease-in-out,padding 0.4s ease-in-out; font-size:0.9rem; padding:0 10px}
.transaction-item.expanded .transaction-expanded-details {max-height:200px; padding:15px 10px; border-top:1px solid #333; margin-bottom:5px}
.detail-row {display:flex; justify-content:space-between; margin-bottom:8px}
.detail-row:last-child {margin-bottom:0}
.detail-row span {color:var(--text-muted)}
.detail-row strong {color:var(--text-color); font-weight:500; display:flex; align-items:center; gap:6px}
.detail-row strong.status-completed {color:var(--success-color)}
.detail-row strong.status-pending {color:var(--primary-color)}
.detail-row strong.status-cancelled {color:var(--danger-color)}

/* --- Стили для модального окна переводов --- */
.modal-overlay {position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.7); backdrop-filter:blur(5px); display:flex; align-items:center; justify-content:center; z-index:1000; opacity:0; pointer-events:none; transition:opacity 0.3s ease}
.modal-overlay.visible {opacity:1; pointer-events:auto}
.modal-content {background-color:var(--surface-color); padding:25px; border-radius:var(--border-radius); width:100%; max-width:500px; border:1px solid transparent; border-top:2px solid var(--primary-color); transform:scale(0.95) translateY(10px); transition:transform 0.3s ease,opacity 0.3s ease; box-shadow:0 10px 40px rgba(0,0,0,0.3)}
.modal-overlay.visible .modal-content {transform:scale(1) translateY(0)}
.modal-header {display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #333; padding-bottom:15px; margin-bottom:20px}
.modal-header h2 {margin-bottom:0; text-shadow:0 0 5px rgba(252,163,17,0.3)}
.modal-body p {color:var(--text-muted); margin-bottom:25px; text-align:left; white-space:nowrap; font-size:0.9rem}

.transfer-options {display:flex; flex-direction:column; gap:15px}
.transfer-option {display:flex; align-items:center; gap:20px; background-color:#2c2c2c; border:1px solid transparent; padding:15px; border-radius:10px; cursor:pointer; text-align:left; transition:all 0.2s ease}
.transfer-option:hover {border-color:var(--primary-color); transform:translateY(-3px); background-color:#333}
.transfer-option i {font-size:1.5rem; color:var(--primary-color); width:25px; text-align:center}
.transfer-option-text {display:flex; flex-direction:column; gap:2px}
.transfer-option span {font-size:1rem; font-weight:600; color:var(--text-color)}
.transfer-option small {font-size:0.85rem; color:var(--text-muted)}
.commission-badge {margin-left:auto; display:flex; flex-direction:column; align-items:center; justify-content:center; background-color:var(--surface-color); padding:5px 10px; border-radius:8px; border:1px solid transparent; width:105px; text-align:center; flex-shrink:0}
.commission-badge span {font-size:1.1rem; font-weight:700; color:var(--text-color)}
.commission-badge small {font-size:0.7rem; color:var(--text-muted); text-transform:uppercase; font-weight:500; white-space:nowrap}
.commission-badge.commission-high span {color:var(--text-muted)}
.commission-badge.commission-free {background-color:var(--primary-color); border-color:var(--primary-hover)}
.commission-badge.commission-free span {color:var(--bg-color)}
.commission-badge.commission-free small {color:rgba(0,0,0,0.7)}
.transaction-item {transition:opacity 0.3s ease-in-out,max-height 0.4s ease-in-out,padding 0.3s ease-in-out; overflow:hidden}
.transaction-item.hidden {opacity:0; max-height:0; padding-top:0; padding-bottom:0; border-bottom-width:0; pointer-events:none}


/* --- Стили для модального окна платежей --- */
.payment-options { display:flex; flex-direction:column; gap:15px }
.payment-card { display:flex; align-items:center; gap:20px; background-color:#2c2c2c; border:1px solid transparent; padding:15px; border-radius:12px; text-decoration:none; transition:all 0.2s ease }
.payment-card:hover { transform:translateY(-3px) scale(1.02); border-color:var(--primary-color); box-shadow:0 5px 20px -5px rgba(0,0,0,0.3) }
.payment-card-icon { width:50px; height:50px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:1.5rem; flex-shrink:0 }
.payment-card-icon.tax-icon { background-color:rgba(252,163,17,0.1); color:var(--primary-color) }
.payment-card-icon.fine-icon { background-color:rgba(211,47,47,0.1); color:var(--danger-color) } 
.payment-card-info { display:flex; flex-direction:column; gap:4px}
.payment-card-title { font-size:1rem; font-weight:600; color:var(--text-color)}
.payment-card-desc { font-size:0.85rem; color:var(--text-muted)}
.payment-card-desc strong { color:var(--text-color); font-weight:500}
.payment-card-arrow { margin-left:auto; color:var(--text-muted); transition:transform 0.2s ease }
.payment-card:hover .payment-card-arrow { transform:translateX(7px); color:var(--primary-color) }

/* --- Стили для модального окна автоплатежей --- */
.autopay-list { display:flex; flex-direction:column; gap:15px; margin-bottom:25px }
.autopay-card { background-color:#2c2c2c; border:1px solid transparent; border-radius:10px; padding:15px }
.autopay-card-header { display:flex; align-items:center; gap:15px; margin-bottom:15px }
.autopay-card-icon { width:45px; height:45px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:1.4rem; flex-shrink:0 }
.autopay-card-icon.tax-icon { background-color:rgba(252,163,17,0.1); color:var(--primary-color) } 
.autopay-card-icon.transfer-icon { background-color:rgba(136,136,136,0.1); color:var(--text-muted) }

/* Добавьте этот блок, если появятся автоплатежи по штрафам */
/*
.autopay-card-icon.fine-icon { background-color:rgba(211,47,47,0.1); color:var(--danger-color) }
*/

.autopay-card-info { display:flex; flex-direction:column; gap:2px}
.autopay-title { font-weight:600; color:var(--text-color)}
.autopay-amount { font-weight:500; color:var(--danger-color)}
.autopay-options-btn {margin-left:auto; background:none; border:none; color:var(--text-muted); cursor:pointer; padding:5px; border-radius:50%; transition:background-color 0.2s ease,color 0.2s ease}
.autopay-options-btn:hover { background-color:var(--surface-color); color:var(--text-color)}
.autopay-card-footer { display:flex; flex-direction:column; gap:8px; font-size:0.8rem; color:var(--text-muted)}
.autopay-card-footer strong { color:var(--text-color); font-weight:500}
.autopay-progress-bar { width:100%; height:4px; background-color:var(--surface-color); border-radius:2px}
.autopay-progress { height:100%; background-color:var(--primary-color); border-radius:2px}
.add-autopay-btn { width:100%; justify-content:center}
.autopay-card { position:relative}
.autopay-dropdown { position:absolute; top:50px; right:15px; background-color:var(--surface-color); border:1px solid transparent; border-radius:8px; padding:5px; box-shadow:0 5px 15px rgba(0,0,0,0.2); z-index:10; display:flex; flex-direction:column; gap:3px; opacity:0; transform:translateY(-10px); pointer-events:none; transition:opacity 0.2s ease,transform 0.2s ease }
.autopay-dropdown.visible { opacity:1; transform:translateY(0); pointer-events:auto }
.autopay-dropdown button { display:flex; align-items:center; gap:10px; background:none; border:none; color:var(--text-muted); padding:8px 12px; border-radius:6px; cursor:pointer; text-align:left; white-space:nowrap; transition:background-color 0.2s ease,color 0.2s ease }
.autopay-dropdown button:hover { background-color:#2c2c2c; color:var(--text-color) }
.autopay-dropdown button.danger:hover { background-color:rgba(211,47,47,0.1); color:var(--danger-color) }
.autopay-dropdown button i { width:16px }


/* --- Стили для модального окна лимитов --- */
.limit-setter { text-align:center; margin-bottom:30px }
.limit-setter label {font-weight:500; color:var(--text-muted); font-size:0.9rem }
.limit-display { font-size:2.5rem; font-weight:700; color:var(--text-color); margin:10px 0 20px; display:flex; justify-content:center; align-items:center; gap:0.1em }
.limit-display .currency-symbol {font-size:0.6em; color:var(--primary-color) }
.limit-display.no-limit span { background:linear-gradient(45deg,#FCA311,#d3712f); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; -webkit-text-fill-color:transparent }
.limit-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background-color: #333; border-radius: 4px; outline: none; }
.limit-slider::-webkit-slider-thumb { -webkit-appearance:none; appearance:none; width:24px; height:24px; background-color:var(--primary-color); border-radius:50%; cursor:pointer; transition:transform 0.2s ease,box-shadow 0.2s ease }
.limit-slider::-moz-range-thumb { width:24px; height:24px; background-color:var(--primary-color); border-radius:50%; cursor:pointer; border:none; transition:transform 0.2s ease,box-shadow 0.2s ease }
.limit-slider::-webkit-slider-thumb:hover { transform:scale(1.1); box-shadow:0 0 10px rgba(252,163,17,0.5) }
.limit-slider::-moz-range-thumb:hover { transform:scale(1.1); box-shadow:0 0 10px rgba(252,163,17,0.5) }
.important-notice { display:flex; align-items:flex-start; gap:15px; background-color:rgba(252,163,17,0.05); border:1px solid transparent; padding:15px; border-radius:10px; margin-bottom:25px }
.important-notice i { color:var(--primary-color); font-size:1.2rem; margin-top:2px }
.important-notice p { margin:0; font-size:0.9rem; color:var(--text-muted); text-align:left; white-space:normal }
.important-notice strong { color:var(--text-color); font-weight:600 }
.save-limit-btn { width:100%; justify-content:center }


/* --- Стили для модального окна смены дизайна --- */
#design-modal .modal-content { max-width:700px }
.design-gallery { display:grid; grid-template-columns:repeat(3,1fr); gap:20px }
.design-card { position:relative; aspect-ratio:16 / 10; border-radius:8px; overflow:hidden; cursor:pointer; border:2px solid transparent; transition:all 0.2s ease }
.design-card.locked img,.design-card.locked .design-card-placeholder { filter:grayscale(1) brightness(0.5) }
.design-card:not(.locked):hover { transform:scale(1.05); border-color:var(--primary-hover) }
.design-card.active { border-color:var(--primary-color); box-shadow:0 0 15px rgba(252,163,17,0.4) }
.design-card img,.design-card-placeholder { width:100%; height:100%; object-fit:cover; transition:filter 0.2s ease }
.design-card-placeholder { background-color:#2c2c2c; border:1px dashed #333; border-radius:6px }
.design-card-overlay { position:absolute; bottom:0; left:0; right:0; background:linear-gradient(to top,rgba(0,0,0,0.8),transparent); padding:15px 8px 8px; text-align:center; color:#fff; font-weight:500; font-size:0.9rem; display:flex; justify-content:center; align-items:center; gap:5px }
.design-card.active .design-card-overlay i { color:var(--primary-color) }
.design-card-locked-overlay { position:absolute; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); display:flex; flex-direction:column; justify-content:center; align-items:center; gap:8px; color:#fff; opacity:0; transition:opacity 0.2s ease }
.design-card.locked:hover .design-card-locked-overlay { opacity:1 }
.design-card-locked-overlay i { font-size:2rem }
.design-price { font-size:1.1rem; font-weight:700; background-color:var(--primary-color); color:var(--bg-color); padding:4px 10px; border-radius:6px }

/* --- Стили для модального окна опасных действий --- */
.modal-content.danger-modal { max-width:400px; text-align:center; border-top-color:var(--danger-color); padding:0; opacity:0; transform:scale(0.95) translateY(10px); transition:transform 0.3s ease,opacity 0.3s ease }
.modal-overlay.visible .modal-content.danger-modal { opacity:1; transform:scale(1) translateY(0) }
.danger-modal-wrapper { padding:25px}
.modal-overlay.visible .danger-modal-wrapper { animation:shake 0.5s 0.3s cubic-bezier(.36,.07,.19,.97) both }
@keyframes shake {10%,90% { transform:translate3d(-1px,0,0) }
 20%,80% {transform:translate3d(2px,0,0)}
 30%,50%,70% {transform:translate3d(-4px,0,0)}
 40%,60% {transform:translate3d(4px,0,0)}
}
.danger-modal-icon { font-size:2.5rem; color:var(--danger-color); margin-bottom:15px }
.danger-modal-title { margin-bottom:10px }
.danger-modal-text { color:var(--text-muted); font-size:0.9rem; line-height:1.5; margin-bottom:25px }
.danger-modal-actions { display:grid; grid-template-columns:1fr 1fr; gap:15px }
.danger-modal-actions .action-btn { position:relative; justify-content:center; font-weight:600; transition:transform 0.2s ease,box-shadow 0.2s ease }
.danger-modal-actions .confirm-btn { background-color:var(--danger-color); color:#fff }
.danger-modal-actions .cancel-btn { background-color:#333; color:var(--text-color) }
.danger-modal-actions .action-btn:hover { transform:scale(1.05)}
.danger-modal-actions .confirm-btn:hover { background-color:var(--danger-color); box-shadow:0 0 10px 2px rgba(211,47,47,0.4) }
.danger-modal-actions .cancel-btn:hover { background-color:#333; box-shadow:0 0 10px 2px rgba(0,0,0,0.25) }